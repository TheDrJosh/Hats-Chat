<div id="chat_window" class="flex-1 bg-cyan-200 dark:bg-slate-600 flex flex-col overflow-hidden w-full h-full">
    {% match chat_window_info %}
    {% when Some with (chat_window_info) %}
    <ol id="chat" class="flex flex-col-reverse m-3 overflow-auto h-fit flex-1" hx-ext="sse"
        sse-connect="/api/chat/event/{{chat_window_info.recipient_name}}" sse-swap="message" hx-target="#chat_window">
        {% for (id, message, time) in chat_window_info.messages.iter().rev() %}
        <li class="{% if id.clone() == base_info.user_id %} self-end {% endif %}">
            <div class="w-1/2">
                <img src="/profile_pictures/{{ chat_window_info.usernames[id].username() }}">
                <h1>{{ chat_window_info.usernames[id].display_name() }}</h1>
                <div>{{ message }}</div>
                <div>{{ time }}</div>
            </div>
        </li>
        {% endfor %}
    </ol>
    <form class="bg-cyan-300 dark:bg-slate-500 px-5 py-3 flex flex-row"
        hx-post="/api/chat/{{chat_window_info.recipient_name}}" hx-swap="none">
        <input type="text" class="rounded-lg w-full bg-cyan-50 dark:bg-slate-400 p-1" name="message">
        <button type="button"
            class="m-1 p-1 bg-cyan-50 dark:bg-slate-400 rounded-lg whitespace-nowrap">attach-file</button>
        <button type="submit" class="m-1 p-1 bg-cyan-50 dark:bg-slate-400 rounded-lg">send</button>
    </form>
    {% when None %}
    <h1>not in chat</h1>
    <a href="/bob">bob</a>
    <a href="/TheDrJosh">bob</a>
    {% endmatch %}
</div>